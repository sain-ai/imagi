<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>DigitalBridge - íš¨ë„ ëª¨ë“œ</title>
  <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no" />
  <style>
    /* --- [ê¸°ë³¸ ì„¤ì •] --- */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background: #000;
      font-family: "Apple SD Gothic Neo", "Malgun Gothic", sans-serif;
      color: #fff;
    }
    
    /* í° í”„ë ˆì„ */
    .phone {
      width: 100%;
      max-width: 450px; /* ì¡°ê¸ˆ ë” ë„“ê²Œ */
      height: 90vh;
      max-height: 850px;
      background: #121212; /* ì™„ì „ ê²€ì •ë³´ë‹¤ëŠ” ëˆˆ í¸í•œ ì§™ì€ íšŒìƒ‰ */
      border-radius: 20px;
      position: relative;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      border: 4px solid #333;
    }

    /* --- [í™”ë©´ ê³µí†µ] --- */
    .screen {
      flex: 1;
      display: none; /* ê¸°ë³¸ ìˆ¨ê¹€ */
      flex-direction: column;
      padding: 20px;
      padding-bottom: 90px; /* í•˜ë‹¨ ë²„íŠ¼ ê³µê°„ í™•ë³´ */
      overflow-y: auto;
    }
    .screen.active { display: flex; }
    
    /* ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¹€ (ê¹”ë”í•˜ê²Œ) */
    ::-webkit-scrollbar { width: 0px; }

    /* --- [ìƒë‹¨ í—¤ë”] --- */
    .top-header {
      padding: 15px 20px;
      background: #1f1f1f;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 2px solid #333;
    }
    .app-title { font-size: 22px; font-weight: bold; color: #fff; }
    .mode-badge {
      background: #444; padding: 6px 12px; border-radius: 20px; font-size: 14px;
    }

    /* --- [í•˜ë‹¨ ê³ ì • ë‚´ë¹„ê²Œì´ì…˜ (í•µì‹¬!)] --- */
    .bottom-nav {
      position: absolute;
      bottom: 0; left: 0; right: 0;
      height: 80px;
      background: #1f1f1f;
      border-top: 2px solid #333;
      display: flex;
      z-index: 100;
    }
    .nav-btn {
      flex: 1;
      border: none;
      background: none;
      color: #fff;
      font-size: 18px;
      font-weight: bold;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      gap: 5px;
      cursor: pointer;
    }
    .nav-btn:active { background: #333; }
    .nav-btn.home { border-right: 1px solid #333; background: #222; }
    .nav-btn.back { background: #222; }
    .nav-icon { font-size: 24px; }

    /* --- [ë©”ì¸ í™ˆ ë²„íŠ¼ë“¤ (ì´ˆëŒ€í˜•)] --- */
    .big-menu-container {
      display: flex;
      flex-direction: column;
      gap: 20px;
      height: 100%;
      justify-content: center;
    }
    .big-btn {
      flex: 1;
      border-radius: 25px;
      border: none;
      padding: 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      text-align: left;
      cursor: pointer;
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
      transition: transform 0.1s;
    }
    .big-btn:active { transform: scale(0.98); }
    
    /* ìƒ‰ìƒ êµ¬ë¶„ (ì‹ í˜¸ë“±) */
    .btn-blue { background: #2563eb; color: #fff; }
    .btn-green { background: #16a34a; color: #fff; }
    .btn-red { background: #dc2626; color: #fff; }
    .btn-gray { background: #4b5563; color: #fff; } /* ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ìš© */

    .btn-text {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }
    .btn-title { font-size: 28px; font-weight: 800; line-height: 1.2; }
    .btn-sub { font-size: 16px; opacity: 0.9; font-weight: normal; }
    .btn-icon { font-size: 50px; opacity: 0.9; }

    /* --- [ëª©ë¡ ìŠ¤íƒ€ì¼ (í¼ì§í•˜ê²Œ)] --- */
    .list-item {
      background: #2d2d2d;
      padding: 30px 20px; /* í„°ì¹˜ ì˜ì—­ í™•ëŒ€ */
      margin-bottom: 15px;
      border-radius: 15px;
      font-size: 22px;
      font-weight: bold;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border: 1px solid #444;
    }
    .list-item:active { background: #2563eb; border-color: #2563eb; }

    /* --- [ë‹¨ê³„ë³„ ê°€ì´ë“œ (í¼ì§í•˜ê²Œ)] --- */
    .guide-box {
      background: #2d2d2d;
      padding: 25px;
      border-radius: 20px;
      margin-bottom: 20px;
      text-align: center;
    }
    .guide-step-num { 
      background: #2563eb; color: #fff; 
      display: inline-block; padding: 5px 15px; 
      border-radius: 20px; font-weight: bold; margin-bottom: 15px;
    }
    .guide-text { font-size: 22px; line-height: 1.5; margin-bottom: 15px; }
    .guide-img { font-size: 80px; margin: 10px 0; }

    /* --- [ìŒì„±/ì±„íŒ… í™”ë©´] --- */
    .voice-ui {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      gap: 30px;
    }
    .mic-circle {
      width: 150px; height: 150px;
      background: #16a34a;
      border-radius: 50%;
      display: flex; justify-content: center; align-items: center;
      font-size: 70px;
      animation: pulse 1.5s infinite;
    }
    @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(22, 163, 74, 0.7); } 70% { box-shadow: 0 0 0 30px rgba(22, 163, 74, 0); } 100% { box-shadow: 0 0 0 0 rgba(22, 163, 74, 0); } }
    
    .chat-input-row {
      width: 100%;
      display: flex;
      gap: 10px;
      margin-top: 20px;
    }
    .big-input {
      flex: 1;
      height: 60px;
      border-radius: 15px;
      border: 2px solid #555;
      background: #000;
      color: #fff;
      font-size: 18px;
      padding: 0 15px;
    }
    .big-send-btn {
      width: 80px;
      height: 60px;
      background: #2563eb;
      color: #fff;
      border: none;
      border-radius: 15px;
      font-size: 18px;
      font-weight: bold;
    }

    /* --- [ì†ì£¼ ëª¨ë“œ (ëŒ€ì‹œë³´ë“œ)] --- */
    /* ì†ì£¼ ëª¨ë“œëŠ” ì¡°ê¸ˆ ë” ì„¸ë ¨ë˜ê³  ì •ë³´ ìœ„ì£¼ë¡œ */
    .gc-header { padding: 20px; font-size: 20px; font-weight: bold; border-bottom: 1px solid #333; }
    .gc-card { background: #222; padding: 20px; border-radius: 15px; margin-bottom: 15px; border: 1px solid #444; }
    .gc-title { font-size: 16px; color: #aaa; margin-bottom: 10px; }
    .gc-stat { font-size: 24px; font-weight: bold; color: #fff; }
    .match-btn {
      width: 100%; padding: 20px; font-size: 20px; font-weight: bold; 
      border-radius: 15px; border: none; cursor: pointer; margin-top: 10px;
    }
    .btn-on { background: #2563eb; color: white; }
    .btn-off { background: #dc2626; color: white; }

    /* --- [í‰ê°€ íŒì—…] --- */
    .feedback-overlay {
      position: absolute; inset: 0; background: rgba(0,0,0,0.9); z-index: 200;
      display: none; flex-direction: column; justify-content: center; align-items: center;
    }
    .feedback-overlay.show { display: flex; }
    .star-row { font-size: 50px; color: #fbbf24; margin: 20px 0; }

  </style>
</head>
<body>

  <div class="phone">
    
    <div class="top-header">
      <div class="app-title">ë””ì§€í„¸ ë¸Œë¦¿ì§€</div>
      <div class="mode-badge" id="header-mode-text">ì–´ë¥´ì‹  ëª¨ë“œ</div>
    </div>

    <div id="screen-role" class="screen active" style="padding-bottom: 20px;">
      <div style="text-align: center; margin-top: 40px; margin-bottom: 40px;">
        <h2 style="font-size: 28px; margin-bottom: 10px;">ëˆ„êµ¬ì‹ ê°€ìš”?</h2>
        <p style="color: #aaa; font-size: 18px;">ì‚¬ìš©í•˜ì‹¤ ë¶„ì„ ì„ íƒí•´ì£¼ì„¸ìš”.</p>
      </div>
      
      <div style="display: flex; flex-direction: column; gap: 20px;">
        <button class="big-btn btn-blue" style="height: 150px;" onclick="setMode('grandparent')">
          <div class="btn-text">
            <span class="btn-title">ì–´ë¥´ì‹ </span>
            <span class="btn-sub">ì‚¬ìš©ë²• ë°°ìš°ê¸° / ë„ì›€ ìš”ì²­</span>
          </div>
          <span class="btn-icon">ğŸ‘µ</span>
        </button>

        <button class="big-btn btn-gray" style="height: 150px;" onclick="setMode('grandchild')">
          <div class="btn-text">
            <span class="btn-title">ì†ì£¼ (ë´‰ì‚¬ì)</span>
            <span class="btn-sub">ë„ì™€ì£¼ëŸ¬ ì™”ì–´ìš”</span>
          </div>
          <span class="btn-icon">ğŸ§‘â€ğŸ’»</span>
        </button>
      </div>
    </div>

    <div id="screen-home" class="screen">
      <div class="big-menu-container">
        
        <button class="big-btn btn-blue" onclick="startUsageFlow()">
          <div class="btn-text">
            <span class="btn-title">ì‚¬ìš©ë²• ê³µë¶€</span>
            <span class="btn-sub">ë°¥ì†¥, ì„¸íƒê¸° ë“±<br>ì‚¬ìš©ë²• ë³´ê¸°</span>
          </div>
          <span class="btn-icon">ğŸ“˜</span>
        </button>

        <button class="big-btn btn-green" onclick="startVoiceSearch()">
          <div class="btn-text">
            <span class="btn-title">ë§ë¡œ ì°¾ê¸°</span>
            <span class="btn-sub">"ì¹´í†¡ ê¸€ì í¬ê²Œ"<br>ë¼ê³  ë§í•´ë³´ì„¸ìš”</span>
          </div>
          <span class="btn-icon">ğŸ¤</span>
        </button>

        <button class="big-btn btn-red" onclick="startEmergencyCall()">
          <div class="btn-text">
            <span class="btn-title">ì†ì£¼ ë¶€ë¥´ê¸°</span>
            <span class="btn-sub">ë´‰ì‚¬ìì™€ ë°”ë¡œ ì—°ê²°<br>(ê¸´ê¸‰ ë„ì›€)</span>
          </div>
          <span class="btn-icon">ğŸš¨</span>
        </button>

        <button class="big-btn btn-gray" style="flex: 0.5;" onclick="startFaq()">
          <div class="btn-text">
            <span class="btn-title" style="font-size: 22px;">ìì£¼ ë¬»ëŠ” ì§ˆë¬¸</span>
          </div>
          <span class="btn-icon">â“</span>
        </button>

      </div>
    </div>

    <div id="screen-list" class="screen">
      <h2 id="list-title" style="margin-bottom: 20px; font-size: 26px;">ëª©ë¡</h2>
      <div id="list-container">
        </div>
    </div>

    <div id="screen-guide" class="screen">
      <h2 id="guide-title" style="margin-bottom: 20px; color: #38bdf8;">ì‚¬ìš©ë²•</h2>
      <div id="guide-content">
        </div>
      <button class="big-btn btn-blue" style="flex:0; justify-content:center;" onclick="goHome()">
        <span style="font-size:24px; font-weight:bold;">ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸°</span>
      </button>
    </div>

    <div id="screen-voice" class="screen">
      <div class="voice-ui">
        <div class="mic-circle" id="mic-icon" onclick="toggleMic()">ğŸ¤</div>
        <h2 id="voice-msg" style="font-size: 28px;">ëˆŒëŸ¬ì„œ ë§ì”€í•˜ì„¸ìš”</h2>
        <p style="color:#aaa; font-size: 20px;">"ë°¥ì†¥", "í™”ë©´ì´ ì–´ë‘ì›Œ" ë“±</p>
        
        <div class="chat-input-row">
          <input type="text" class="big-input" id="chat-input" placeholder="ì§ì ‘ ì…ë ¥í•˜ê¸°">
          <button class="big-send-btn" onclick="sendChat()">ê²€ìƒ‰</button>
        </div>
      </div>
    </div>

    <div id="screen-call" class="screen center-layout">
      <div style="text-align: center;">
        <div style="font-size: 100px; margin-bottom: 20px;">ğŸ§‘â€ğŸ’»</div>
        <h2 style="font-size: 32px; margin-bottom: 10px;" id="call-status">ì—°ê²° ì¤‘...</h2>
        <p style="font-size: 24px; color: #aaa; margin-bottom: 50px;" id="call-timer">00:00</p>
        
        <button class="big-btn btn-red" style="width: 100%; justify-content: center;" onclick="endCall()">
          <span style="font-size: 28px; font-weight: bold;">í†µí™” ì¢…ë£Œ</span>
        </button>
      </div>
    </div>

    <div id="screen-grandchild" class="screen">
      <div class="gc-header">ë´‰ì‚¬ì ëŒ€ì‹œë³´ë“œ</div>
      
      <div style="padding-top: 20px;">
        <div class="gc-card" style="text-align: center;">
          <div class="gc-title">í˜„ì¬ ìƒíƒœ</div>
          <div class="gc-stat" id="gc-status-text" style="color: #aaa;">ëŒ€ê¸° ì¤‘ì§€ (OFF)</div>
          <div style="margin: 15px 0; font-size: 50px;" id="gc-icon">ğŸ’¤</div>
          <p style="color: #888; font-size: 14px; margin-bottom: 15px;">ë„ì›€ ìš”ì²­ì„ ë°›ìœ¼ë ¤ë©´ ì‹œì‘í•˜ì„¸ìš”.</p>
          
          <button class="match-btn btn-on" id="match-toggle-btn" onclick="toggleMatch()">ë´‰ì‚¬ ëŒ€ê¸° ì‹œì‘ (ON)</button>
        </div>

        <div class="gc-card">
          <div class="gc-title">ë‚´ í™œë™ ë‚´ì—­</div>
          <div style="margin-bottom: 10px; border-bottom: 1px solid #444; padding-bottom: 10px;">
            <span style="color:#22c55e;">[í•´ê²°]</span> 10ë¶„ ì „ - í‚¤ì˜¤ìŠ¤í¬ ì‚¬ìš©ë²•
          </div>
          <div>
            <span style="color:#22c55e;">[í•´ê²°]</span> ì–´ì œ - ì™€ì´íŒŒì´ ì—°ê²°
          </div>
        </div>
      </div>
    </div>

    <div id="feedback-popup" class="feedback-overlay">
      <h2 style="font-size: 30px; margin-bottom: 10px;">ê°ì‚¬í•©ë‹ˆë‹¤!</h2>
      <p style="font-size: 20px; color: #ccc;">í•™ìƒì´ ì¹œì ˆí–ˆë‚˜ìš”?</p>
      <div class="star-row">â­â­â­â­â­</div>
      <button class="big-btn btn-blue" style="flex: 0; width: 200px; justify-content: center;" onclick="closeFeedback()">
        í™•ì¸
      </button>
    </div>

    <div class="bottom-nav" id="bottom-nav" style="display:none;">
      <button class="nav-btn home" onclick="goHome()">
        <span class="nav-icon">ğŸ </span>
        <span>ì²˜ìŒìœ¼ë¡œ</span>
      </button>
      <button class="nav-btn back" onclick="goBack()">
        <span class="nav-icon">â†©ï¸</span>
        <span>ë’¤ë¡œê°€ê¸°</span>
      </button>
    </div>

  </div>

  <script>
    /* --- [ë°ì´í„°] --- */
    const data = {
      "ë°¥ì†¥": { icon: "ğŸš", steps: ["ëšœê»‘ì„ ì—´ê³  ìŒ€ì„ ë„£ìœ¼ì„¸ìš”.", "ëšœê»‘ì„ ë‹«ê³  ì†ì¡ì´ë¥¼ ëŒë ¤ ì ê·¸ì„¸ìš”.", "'ì·¨ì‚¬' ë²„íŠ¼ì„ ê¾¹ ëˆ„ë¥´ì„¸ìš”."] },
      "ì„¸íƒê¸°": { icon: "ğŸ‘•", steps: ["ë¹¨ë˜ë¥¼ ë„£ê³  ë¬¸ì„ ë‹«ìœ¼ì„¸ìš”.", "ì„¸ì œí†µì— ì„¸ì œë¥¼ í•œ ìŠ¤í‘¼ ë„£ìœ¼ì„¸ìš”.", "ì „ì›ì„ ì¼œê³  ë™ì‘ ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”."] },
      "ìŠ¤ë§ˆíŠ¸í°": { icon: "ğŸ“±", steps: ["ì„¤ì •(í†±ë‹ˆë°”í€´)ì„ ëˆ„ë¥´ì„¸ìš”.", "ë””ìŠ¤í”Œë ˆì´ë¥¼ ì°¾ìœ¼ì„¸ìš”.", "ê¸€ì í¬ê¸°ë¥¼ í¬ê²Œ ì¡°ì ˆí•˜ì„¸ìš”."] },
      "í‚¤ì˜¤ìŠ¤í¬": { icon: "ğŸ”", steps: ["í™”ë©´ì„ ì†ìœ¼ë¡œ í„°ì¹˜í•˜ì„¸ìš”.", "ë¨¹ê³  ê°ˆì§€ í¬ì¥í• ì§€ ê³ ë¥´ì„¸ìš”.", "ì¹´ë“œ êµ¬ë©ì— ì¹´ë“œë¥¼ ê½‚ìœ¼ì„¸ìš”."] }
    };
    const faq = [
      {t: "ì™€ì´íŒŒì´ê°€ ì•ˆ ë¼ìš”", d: "ê³µìœ ê¸° ì½”ë“œë¥¼ ëºë‹¤ê°€ ë‹¤ì‹œ ê½‚ì•„ë³´ì„¸ìš”."},
      {t: "ì†Œë¦¬ê°€ ë„ˆë¬´ ì‘ì•„ìš”", d: "ê¸°ê³„ ì˜†ë©´ì— ìˆëŠ” ë²„íŠ¼ì„ ìœ„ë¡œ ëˆ„ë¥´ì„¸ìš”."}
    ];

    /* --- [ìƒíƒœ ë³€ìˆ˜] --- */
    let historyStack = []; // ë’¤ë¡œê°€ê¸°ë¥¼ ìœ„í•œ ìŠ¤íƒ
    let isMatching = false; // ì†ì£¼ ë§¤ì¹­ ìƒíƒœ
    let callTimer;

    /* --- [í•µì‹¬ ë„¤ë¹„ê²Œì´ì…˜ í•¨ìˆ˜] --- */
    function showScreen(id) {
      // 1. ëª¨ë“  í™”ë©´ ìˆ¨ê¹€
      document.querySelectorAll('.screen').forEach(el => el.classList.remove('active'));
      // 2. í•´ë‹¹ í™”ë©´ í‘œì‹œ
      document.getElementById(id).classList.add('active');
      
      // 3. ë‚´ë¹„ê²Œì´ì…˜ ë°” ì²˜ë¦¬
      const nav = document.getElementById('bottom-nav');
      if (id === 'screen-role') {
        nav.style.display = 'none'; // ì—­í•  ì„ íƒì—ì„  ìˆ¨ê¹€
        historyStack = []; // ê¸°ë¡ ì´ˆê¸°í™”
      } else {
        nav.style.display = 'flex';
        // ìŠ¤íƒ ê´€ë¦¬ëŠ” goBackì—ì„œ ì²˜ë¦¬
      }
    }

    function setMode(mode) {
      if(mode === 'grandparent') {
        document.getElementById('header-mode-text').innerText = "ì–´ë¥´ì‹  ëª¨ë“œ";
        showScreen('screen-home');
        historyStack.push('screen-home');
      } else {
        document.getElementById('header-mode-text').innerText = "ì†ì£¼(ë´‰ì‚¬ì) ëª¨ë“œ";
        showScreen('screen-grandchild');
        historyStack.push('screen-grandchild');
      }
    }

    function goHome() {
      // í˜„ì¬ ëª¨ë“œì— ë”°ë¼ í™ˆì´ ë‹¤ë¦„
      const currentMode = document.getElementById('header-mode-text').innerText;
      if (currentMode.includes("ì–´ë¥´ì‹ ")) {
        showScreen('screen-home');
        historyStack = ['screen-home'];
      } else {
        showScreen('screen-grandchild');
        historyStack = ['screen-grandchild'];
      }
    }

    function goBack() {
      if (historyStack.length > 1) {
        historyStack.pop(); // í˜„ì¬ í™”ë©´ ì œê±°
        const prev = historyStack[historyStack.length - 1];
        showScreen(prev);
      } else {
        // ë” ë’¤ë¡œ ê°ˆ ê³³ì´ ì—†ìœ¼ë©´ ì—­í•  ì„ íƒìœ¼ë¡œ
        showScreen('screen-role');
      }
    }

    function pushHistory(id) {
      showScreen(id);
      historyStack.push(id);
    }

    /* --- [ê¸°ëŠ¥ 1: ì‚¬ìš©ë²• ê³µë¶€] --- */
    function startUsageFlow() {
      const con = document.getElementById('list-container');
      document.getElementById('list-title').innerText = "ì–´ë–¤ ê¸°ê³„ì¸ê°€ìš”?";
      con.innerHTML = '';
      
      Object.keys(data).forEach(key => {
        const div = document.createElement('div');
        div.className = 'list-item';
        div.innerHTML = `<span>${key}</span><span>${data[key].icon}</span>`;
        div.onclick = () => showGuide(key);
        con.appendChild(div);
      });
      pushHistory('screen-list');
    }

    function showGuide(key) {
      const item = data[key];
      const con = document.getElementById('guide-content');
      document.getElementById('guide-title').innerText = key + " ì‚¬ìš©ë²•";
      con.innerHTML = '';

      item.steps.forEach((step, idx) => {
        con.innerHTML += `
          <div class="guide-box">
            <div class="guide-step-num">${idx + 1}ë‹¨ê³„</div>
            <div class="guide-text">${step}</div>
          </div>
        `;
      });
      pushHistory('screen-guide');
    }

    function startFaq() {
      const con = document.getElementById('list-container');
      document.getElementById('list-title').innerText = "ìì£¼ ë¬»ëŠ” ì§ˆë¬¸";
      con.innerHTML = '';
      faq.forEach(item => {
        const div = document.createElement('div');
        div.className = 'list-item';
        div.style.display = 'block';
        div.innerHTML = `<div style="font-size:20px; color:#38bdf8; margin-bottom:5px;">Q. ${item.t}</div><div style="font-size:18px; color:#ddd; font-weight:normal;">A. ${item.d}</div>`;
        con.appendChild(div);
      });
      pushHistory('screen-list');
    }

    /* --- [ê¸°ëŠ¥ 2: ìŒì„± ê²€ìƒ‰] --- */
    function startVoiceSearch() {
      pushHistory('screen-voice');
      document.getElementById('voice-msg').innerText = "ëˆŒëŸ¬ì„œ ë§ì”€í•˜ì„¸ìš”";
    }

    function toggleMic() {
      const msg = document.getElementById('voice-msg');
      const mic = document.getElementById('mic-icon');
      msg.innerText = "ë“£ê³  ìˆìŠµë‹ˆë‹¤...";
      mic.style.background = "#dc2626"; // ë¹¨ê°„ìƒ‰ (ë…¹ìŒì¤‘)
      
      setTimeout(() => {
        msg.innerText = "í™•ì¸í–ˆìŠµë‹ˆë‹¤!";
        mic.style.background = "#16a34a"; // ì›ë³µ
        // ìë™ ì´ë™ ì‹œë®¬ë ˆì´ì…˜
        document.getElementById('chat-input').value = "ë°¥ì†¥";
        sendChat();
      }, 2000);
    }

    function sendChat() {
      const val = document.getElementById('chat-input').value;
      if (val.includes("ë°¥")) showGuide("ë°¥ì†¥");
      else if (val.includes("ì„¸íƒ")) showGuide("ì„¸íƒê¸°");
      else if (val.includes("í°") || val.includes("ê¸€ì")) showGuide("ìŠ¤ë§ˆíŠ¸í°");
      else if (val.includes("ì£¼ë¬¸") || val.includes("í‚¤ì˜¤ìŠ¤í¬")) showGuide("í‚¤ì˜¤ìŠ¤í¬");
      else alert("ì£„ì†¡í•´ìš”. ì•„ì§ ë°°ìš°ê³  ìˆëŠ” ì¤‘ì´ì—ìš”.");
    }

    /* --- [ê¸°ëŠ¥ 3: ê¸´ê¸‰ í˜¸ì¶œ (Azar ìŠ¤íƒ€ì¼)] --- */
    function startEmergencyCall() {
      pushHistory('screen-call');
      const status = document.getElementById('call-status');
      const timer = document.getElementById('call-timer');
      
      status.innerText = "ë´‰ì‚¬ì ì°¾ëŠ” ì¤‘...";
      timer.innerText = "ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”";

      setTimeout(() => {
        status.innerText = "ê¹€ì² ìˆ˜ í•™ìƒ (ì—°ê²°ë¨)";
        let sec = 0;
        clearInterval(callTimer);
        callTimer = setInterval(() => {
          sec++;
          timer.innerText = "í†µí™” ì‹œê°„ : " + sec + "ì´ˆ";
        }, 1000);
      }, 2000);
    }

    function endCall() {
      clearInterval(callTimer);
      // í‰ê°€ íŒì—… ë„ìš°ê¸°
      document.getElementById('feedback-popup').classList.add('show');
    }

    function closeFeedback() {
      document.getElementById('feedback-popup').classList.remove('show');
      goHome();
    }

    /* --- [ì†ì£¼ ëª¨ë“œ ë¡œì§] --- */
    function toggleMatch() {
      const btn = document.getElementById('match-toggle-btn');
      const stat = document.getElementById('gc-status-text');
      const icon = document.getElementById('gc-icon');

      isMatching = !isMatching;

      if (isMatching) {
        btn.innerText = "ëŒ€ê¸° ì¢…ë£Œ (OFF)";
        btn.className = "match-btn btn-off";
        stat.innerText = "ë§¤ì¹­ ëŒ€ê¸° ì¤‘... (ON)";
        stat.style.color = "#38bdf8";
        icon.innerText = "ğŸ“¡"; // ë ˆì´ë” ì•„ì´ì½˜
      } else {
        btn.innerText = "ë´‰ì‚¬ ëŒ€ê¸° ì‹œì‘ (ON)";
        btn.className = "match-btn btn-on";
        stat.innerText = "ëŒ€ê¸° ì¤‘ì§€ (OFF)";
        stat.style.color = "#aaa";
        icon.innerText = "ğŸ’¤";
      }
    }
  </script>
</body>
</html>
