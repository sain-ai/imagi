<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>PROJECT â€“ DigitalBridge (Interactive Feedback)</title>
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <style>
    /* --- [1. ê¸°ë³¸ ì„¤ì • & í”„ë ˆì„] --- */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background: #111827;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }
    .phone {
      width: 100%;
      max-width: 420px;
      aspect-ratio: 9 / 19.5;
      background: #020617;
      border-radius: 28px;
      position: relative;
      overflow: hidden;
      box-shadow: 0 20px 40px rgba(0,0,0,0.6);
      color: #f9fafb;
    }

    /* --- [2. í™”ë©´ ì „í™˜] --- */
    .screen {
      position: absolute;
      inset: 0;
      display: flex;
      flex-direction: column;
      background: linear-gradient(180deg, #0f172a 0, #020617 42%, #020617 100%);
      padding: 18px 18px 24px;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
      z-index: 0;
    }
    .screen.active {
      opacity: 1;
      pointer-events: auto;
      z-index: 10;
    }
    .screen.center-layout {
      justify-content: center;
      align-items: center;
      padding: 20px;
    }

    /* --- [3. UI ì»´í¬ë„ŒíŠ¸] --- */
    .loader { width: 72px; height: 72px; transform: rotate(-90deg); }
    .loader circle { fill: none; stroke-width: 4; stroke-linecap: round; }
    .loader-bg { stroke: rgba(148,163,184,0.35); }
    .loader-progress { stroke: #38bdf8; stroke-dasharray: 188.4; stroke-dashoffset: 188.4; animation: progressFill 3s ease-out forwards; }
    @keyframes progressFill { to { stroke-dashoffset: 0; } }

    .splash-title { font-size: 24px; font-weight: 700; letter-spacing: 0.14em; text-transform: uppercase; }
    .brand { font-size: 20px; font-weight: 600; margin-top: 4px; color: #38bdf8; }
    .splash-sub { font-size: 15px; color: #cbd5f5; margin-top: 6px; line-height: 1.5; text-align: center; }
    .loader-wrapper { margin-top: 24px; display: flex; flex-direction: column; align-items: center; gap: 8px; color: #9ca3af; font-size: 13px; }

    /* ì—­í•  ì„ íƒ */
    .role-wrapper { width: 100%; padding: 28px 16px; display: flex; flex-direction: column; align-items: center; gap: 24px; }
    .role-chip { font-size: 13px; padding: 6px 14px; border-radius: 999px; border: 1px solid rgba(148,163,184,0.7); color: #cbd5f5; background: rgba(15,23,42,0.9); }
    .role-title { font-size: 22px; font-weight: 700; text-align: center; }
    .role-desc { font-size: 14px; color: #9ca3af; text-align: center; line-height: 1.5; }
    .role-boxes { margin-top: 12px; width: 100%; display: flex; gap: 16px; }
    .role-card {
      flex: 1; aspect-ratio: 4 / 5;
      border-radius: 20px; padding: 20px 14px;
      background: linear-gradient(150deg, #020617 0, #020617 45%, #0f172a 100%);
      border: 1px solid rgba(148,163,184,0.6);
      display: flex; flex-direction: column; justify-content: center; align-items: center; gap: 10px;
      cursor: pointer; text-align: center; box-shadow: 0 10px 24px rgba(15,23,42,0.9); transition: 0.18s ease;
    }
    .role-card.active { background: linear-gradient(145deg, #1d4ed8 0, #38bdf8 100%); border-color: #93c5fd; }
    .role-card-icon { font-size: 32px; margin-bottom: 4px; }
    .role-main { font-size: 17px; font-weight: 600; }
    .role-sub { font-size: 12px; color: #e5e7eb; opacity: 0.9; line-height: 1.4; }

    /* ë©”ì¸ í™ˆ */
    .status-bar { width: 100%; display: flex; justify-content: space-between; align-items: center; font-size: 12px; color: #9ca3af; opacity: 0.9; margin-bottom: 8px; }
    .header { width: 100%; margin-top: 4px; display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
    .app-name { font-size: 21px; font-weight: 700; }
    .app-sub { font-size: 13px; color: #a5b4fc; }
    .mode-switch-btn { background: rgba(30,41,59,0.8); border: 1px solid #475569; color: #cbd5f5; padding: 6px 12px; border-radius: 8px; font-size: 12px; cursor: pointer; display: flex; align-items: center; gap: 4px; }

    .home-body {
      flex: 1; width: 100%; margin-top: 4px;
      background: rgba(15,23,42,0.96); border-radius: 20px; border: 1px solid rgba(31,41,55,0.85);
      padding: 20px 18px 16px;
      display: flex; flex-direction: column; gap: 16px; 
      position: relative;
    }
    .home-title { font-size: 19px; font-weight: 600; margin-bottom: 4px; }
    .home-desc { font-size: 14px; color: #9ca3af; line-height: 1.5; }

    .home-buttons { display: flex; flex-direction: column; gap: 12px; flex: 1; }
    .home-btn {
      flex: 1; width: 100%; border-radius: 16px; padding: 0 18px; border: none;
      text-align: left; cursor: pointer; display: flex; justify-content: space-between; align-items: center;
      background: linear-gradient(135deg, #1e293b 0, #0f172a 100%); color: #e5e7eb;
      box-shadow: 0 8px 18px rgba(15,23,42,0.8);
    }
    .home-btn.secondary { background: linear-gradient(135deg, #0b1120 0, #020617 100%); box-shadow: 0 6px 14px rgba(15,23,42,0.6); }
    .home-btn-main { font-size: 17px; font-weight: 600; margin-bottom: 6px; }
    .home-btn-sub { font-size: 13px; color: #9ca3af; line-height: 1.4; }
    .home-btn-icon { font-size: 24px; opacity: 0.9; }

    .info-section { display: flex; flex-direction: column; gap: 12px; flex: 1; width: 100%; }
    .info-row { display: flex; gap: 12px; width: 100%; flex: 1; }
    .info-card {
      flex: 1; height: 100%; padding: 16px 14px;
      border-radius: 16px;
      background: rgba(15,23,42,0.98); border: 1px solid rgba(55,65,81,0.95);
      display: flex; flex-direction: column; justify-content: center; gap: 8px;
      cursor: pointer; transition: all 0.15s ease;
    }
    .info-card:hover { transform: translateY(-2px); border-color: #60a5fa; background: rgba(15,23,42,1); }
    .info-card-header { display: flex; align-items: center; justify-content: space-between; }
    .info-card-title { font-weight: 600; color: #e5e7eb; font-size: 14px; letter-spacing: -0.5px; }
    .info-card-text { color: #9ca3af; line-height: 1.4; font-size: 13px; }
    .info-card-wide { width: 100%; flex: 1; border-color: rgba(239,68,68,0.3); }

    .voice-area { padding-top: 6px; display: flex; flex-direction: column; align-items: center; gap: 10px; }
    .voice-btn {
      width: 70px; height: 70px; border-radius: 999px; border: none;
      background: radial-gradient(circle, #38bdf8 0, #1d4ed8 55%, #020617 100%);
      display: flex; justify-content: center; align-items: center; color: #f9fafb;
      font-size: 28px; box-shadow: 0 10px 24px rgba(59,130,246,0.7); cursor: pointer;
    }
    .voice-label { font-size: 13px; color: #9ca3af; text-align: center; }

    /* --- [ì„œë¸Œ ê¸°ëŠ¥ ê³µí†µ] --- */
    .header-nav { display: flex; align-items: center; gap: 12px; padding-bottom: 16px; border-bottom: 1px solid rgba(31,41,55,0.6); margin-bottom: 16px; }
    .back-btn { background: none; border: none; color: #e5e7eb; font-size: 24px; cursor: pointer; padding: 4px; }
    .page-title { font-size: 18px; font-weight: 600; }
    .list-container { flex: 1; overflow-y: auto; display: flex; flex-direction: column; gap: 12px; }
    .list-item { padding: 24px 20px; border-radius: 16px; background: rgba(30, 41, 59, 0.6); border: 1px solid rgba(75, 85, 99, 0.4); display: flex; justify-content: space-between; align-items: center; cursor: pointer; transition: 0.2s; }
    .list-item:active { background: #38bdf8; color: #000; }
    .list-text { font-size: 18px; font-weight: 500; }
    .guide-step { background: #1e293b; padding: 20px; border-radius: 16px; margin-bottom: 16px; border: 1px solid #374151; }
    .step-num { font-size: 15px; color: #38bdf8; font-weight: 700; margin-bottom: 8px; }
    .step-content { font-size: 17px; line-height: 1.5; color: #f3f4f6; }
    .step-img-box { margin-top: 12px; width: 100%; height: 140px; background: #0f172a; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 40px; color: #475569; border: 1px dashed #475569; }

    /* ì±„íŒ… */
    .chat-area { flex: 1; overflow-y: auto; display: flex; flex-direction: column; gap: 14px; padding-bottom: 10px; }
    .message { max-width: 85%; padding: 14px 18px; border-radius: 16px; font-size: 16px; line-height: 1.4; }
    .msg-ai { align-self: flex-start; background: #334155; color: #fff; border-bottom-left-radius: 2px; }
    .msg-user { align-self: flex-end; background: #2563eb; color: #fff; border-bottom-right-radius: 2px; }
    .chat-input-area { display: flex; gap: 10px; align-items: center; background: #1e293b; padding: 10px; border-radius: 999px; border: 1px solid #374151; }
    .chat-input { flex: 1; background: none; border: none; color: white; padding-left: 10px; font-size: 16px; outline: none; }
    .send-btn, .mic-btn { width: 44px; height: 44px; border-radius: 50%; border: none; cursor: pointer; display: flex; justify-content: center; align-items: center; font-size: 20px; }
    .mic-btn { background: #dc2626; color: white; }
    .mic-btn.idle { background: #475569; }
    .send-btn { background: #38bdf8; color: #000; font-weight: bold; }
    .result-card { background: linear-gradient(135deg, #1e293b 0, #0f172a 100%); padding: 18px; border-radius: 14px; border: 1px solid #38bdf8; margin-top: 8px; }
    .result-title { color: #38bdf8; font-weight: 700; margin-bottom: 6px; font-size: 17px; }
    .result-desc { font-size: 14px; color: #cbd5f5; margin-bottom: 12px; }
    .buy-btn { width: 100%; padding: 12px; background: #2563eb; color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; font-size: 15px; }

    /* í†µí™” UI */
    .call-ui { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative; width: 100%; }
    .call-avatar { width: 120px; height: 120px; background: #475569; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-size: 50px; margin-bottom: 20px; border: 4px solid #38bdf8; animation: pulse 2s infinite; }
    @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(56, 189, 248, 0.4); } 70% { box-shadow: 0 0 0 20px rgba(56, 189, 248, 0); } 100% { box-shadow: 0 0 0 0 rgba(56, 189, 248, 0); } }
    .call-status { font-size: 22px; font-weight: 600; margin-bottom: 10px; color: #f9fafb; }
    .call-timer { font-size: 16px; color: #9ca3af; margin-bottom: 50px; }
    .hangup-btn { width: 70px; height: 70px; background: #ef4444; border-radius: 50%; border: none; color: white; font-size: 30px; cursor: pointer; display: flex; justify-content: center; align-items: center; box-shadow: 0 10px 20px rgba(239,68,68,0.4); }
    /* ì¡°ë¶€ëª¨ ëª¨ë“œ ì˜ìƒí†µí™” ë°°ê²½ */
    .camera-feed { position: absolute; inset: 0; background: #1e293b; z-index: -1; border-radius: 20px; opacity: 0; transition: opacity 1s; display: flex; justify-content: center; align-items: center; color: #64748b; font-size: 18px; }
    .camera-feed.connected { opacity: 1; }
    
    /* ìŒì„± ë‚´ë¹„ */
    .voice-nav-ui { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; gap: 20px; width: 100%; }
    .voice-nav-icon { width: 100px; height: 100px; border-radius: 50%; background: #38bdf8; display: flex; justify-content: center; align-items: center; font-size: 40px; animation: pulse 1.5s infinite; color: #000; }
    .voice-nav-text { font-size: 22px; font-weight: 700; color: #fff; }
    .voice-nav-sub { font-size: 16px; color: #9ca3af; }
    
    /* [ì†ì£¼ ëª¨ë“œ ëŒ€ì‹œë³´ë“œ] */
    .gc-dashboard { display: flex; flex-direction: column; gap: 16px; flex: 1; overflow-y:auto; padding-bottom:10px; }
    .gc-card { background: rgba(30,41,59,0.5); border-radius: 16px; padding: 20px; border: 1px solid rgba(75,85,99,0.4); }
    .gc-card-title { font-size: 16px; font-weight: 600; margin-bottom: 12px; color: #e5e7eb; display: flex; justify-content: space-between; align-items:center; }
    
    .event-progress-bg { width: 100%; height: 8px; background: #1e293b; border-radius: 99px; overflow: hidden; margin-top: 10px; }
    .event-progress-bar { width: 70%; height: 100%; background: linear-gradient(90deg, #38bdf8, #22c55e); }
    .event-text { font-size: 12px; color: #9ca3af; margin-top: 6px; display: flex; justify-content: space-between; }
    .log-item { display: flex; flex-direction: column; gap: 4px; padding-bottom: 12px; border-bottom: 1px solid rgba(255,255,255,0.05); margin-bottom: 12px; }
    .log-item:last-child { border-bottom: none; margin-bottom: 0; padding-bottom: 0; }
    .log-header { display: flex; justify-content: space-between; font-size: 12px; color: #9ca3af; }
    .log-content { font-size: 14px; color: #e5e7eb; }

    /* ë ˆì´ë” ìŠ¤ìº” ì• ë‹ˆë©”ì´ì…˜ (ëŒ€ê¸° ì¤‘) */
    .radar-scanner { width: 140px; height: 140px; background: rgba(56,189,248,0.1); border-radius: 50%; border: 1px solid rgba(56,189,248,0.3); position: relative; display: flex; justify-content: center; align-items: center; margin: 20px auto; }
    .radar-scanner::after { content: ''; position: absolute; width: 100%; height: 100%; border-radius: 50%; background: conic-gradient(transparent, rgba(56,189,248,0.4)); animation: radarSpin 2s linear infinite; }
    @keyframes radarSpin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
    .radar-status { font-size: 18px; font-weight: 700; color: #38bdf8; text-align: center; margin-top: 10px; }

    /* [NEW] í”¼ë“œë°±(í‰ê°€) í™”ë©´ ìŠ¤íƒ€ì¼ ìˆ˜ì • */
    .feedback-ui { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; gap: 20px; position: relative; }
    /* ë³„ì  ì»¨í…Œì´ë„ˆ */
    .stars-container { display: flex; gap: 8px; }
    .star { font-size: 36px; cursor: pointer; color: #4b5563; transition: color 0.2s; }
    .star.filled { color: #fbbf24; }
    .feedback-btn { padding: 14px 40px; border-radius: 99px; background: #2563eb; color: white; border: none; font-size: 16px; font-weight: bold; cursor: pointer; transition: background 0.2s; }
    .feedback-btn:active { background: #1d4ed8; }
    /* ê°ì‚¬ ë©”ì‹œì§€ (ì´ˆê¸°ì—” ìˆ¨ê¹€) */
    .thankyou-msg { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 24px; font-weight: 700; color: #38bdf8; opacity: 0; transition: opacity 0.5s ease; pointer-events: none; width: 100%; }
    /* í”¼ë“œë°± ì…ë ¥ UI (ê°ì‚¬ ë©”ì‹œì§€ ëœ° ë•Œ ìˆ¨ê¹€) */
    .feedback-input-ui { transition: opacity 0.5s ease; }

  </style>
</head>
<body>
  <div class="phone">
    
    <div id="screen-splash" class="screen center-layout active">
      <div style="text-align: center;">
        <div class="splash-title">PROJECT</div>
        <div class="brand">DigitalBridge</div>
        <div class="splash-sub">ì‰½ê³  ê°„í¸í•œ<br/>ìƒí™œ ì „ìê¸°ê¸° ì‚¬ìš© ì•ˆë‚´ ì„œë¹„ìŠ¤</div>
      </div>
      <div class="loader-wrapper">
        <svg class="loader" viewBox="0 0 80 80">
          <circle class="loader-bg" cx="40" cy="40" r="30" />
          <circle class="loader-progress" cx="40" cy="40" r="30" />
        </svg>
        <span>ì¤€ë¹„í•˜ëŠ” ì¤‘ì…ë‹ˆë‹¤â€¦</span>
      </div>
    </div>

    <div id="screen-role" class="screen center-layout">
      <div class="role-wrapper">
        <div class="role-chip">DigitalBridge Â· ëª¨ë“œ ì„ íƒ</div>
        <div class="role-title">ëˆ„êµ¬ë¡œ ì´ìš©í•˜ì‹œë‚˜ìš”?</div>
        <div class="role-desc">ì¡°ë¶€ëª¨ë‹˜ì€ ì‚¬ìš©ë²• ì•ˆë‚´ë¥¼,<br/>ì²­ë…„ ë´‰ì‚¬ìëŠ” ë„ì›€ì„ ë“œë¦½ë‹ˆë‹¤.</div>
        <div class="role-boxes">
          <div class="role-card" onclick="goToScreen('screen-grandchild-home')">
            <div class="role-card-icon">ğŸ§‘â€ğŸ’»</div>
            <div class="role-main">ì†ì£¼ ëª¨ë“œ</div>
            <div class="role-sub">ë´‰ì‚¬ ë° í™œë™<br/>ê¸°ë¡ í™•ì¸</div>
          </div>
          <div class="role-card active" onclick="goToScreen('screen-loading2')">
            <div class="role-card-icon">ğŸ‘µ</div>
            <div class="role-main">ì¡°ë¶€ëª¨ ëª¨ë“œ</div>
            <div class="role-sub">ì‚¬ìš©ë²•ì´ ê¶ê¸ˆí•œ<br/>ì–´ë¥´ì‹ </div>
          </div>
        </div>
      </div>
    </div>

    <div id="screen-loading2" class="screen center-layout">
      <div style="text-align:center; gap:16px; display:flex; flex-direction:column;">
        <div style="font-size:20px; font-weight:600;">ì¡°ë¶€ëª¨ ëª¨ë“œë¥¼ ì¤€ë¹„í•˜ê³  ìˆì–´ìš”</div>
        <div style="font-size:14px; color:#9ca3af;">ì–´ë¥´ì‹ ê»˜ ê¼­ í•„ìš”í•œ ì •ë³´ë¥¼<br/>ë³´ê¸° ì¢‹ê²Œ ì •ë¦¬í•˜ëŠ” ì¤‘ì…ë‹ˆë‹¤â€¦</div>
      </div>
      <div class="loader-wrapper">
        <svg class="loader" viewBox="0 0 80 80">
          <circle class="loader-bg" cx="40" cy="40" r="30" />
          <circle class="loader-progress" cx="40" cy="40" r="30" />
        </svg>
        <span>ì ì‹œë§Œ ê¸°ë‹¤ë ¤ ì£¼ì„¸ìš”</span>
      </div>
    </div>

    <div id="screen-home" class="screen">
      <div class="status-bar">
        <div class="status-left">
          <span style="width:6px; height:6px; background:#22c55e; border-radius:50%; display:inline-block; margin-right:4px;"></span>
          <span>DigitalBridge</span>
        </div>
        <div class="status-right"><span>ì•ˆì‹¬ ëª¨ë“œ ON</span></div>
      </div>

      <div class="header">
        <div class="header-left">
          <div class="app-name">DigitalBridge - HOME</div>
          <div class="app-sub">ì‰½ê³  ê°„í¸í•œ ì „ìê¸°ê¸° ë„ìš°ë¯¸</div>
        </div>
        <button class="mode-switch-btn" onclick="goToScreen('screen-role')"><span>â—€ ëª¨ë“œ ë³€ê²½</span></button>
      </div>

      <div class="home-body">
        <div style="margin-bottom:4px;">
          <div class="home-title">ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?</div>
          <div class="home-desc">ì´ë§ˆê¸°ë‚œìŠ¤(T)-Aì¡°ì˜<br/>ì‰½ê³  ê°„í¸í•œ ë””ì§€í„¸ ì•ˆë‚´ ì„œë¹„ìŠ¤!</div>
        </div>

        <div class="home-buttons">
          <button class="home-btn" onclick="startUsageFlow()">
            <div>
              <div class="home-btn-main">ëª¨ë¥´ëŠ” ì „ìê¸°ê¸° ì‚¬ìš©ë²• ì•Œì•„ë³´ê¸°</div>
              <div class="home-btn-sub">ìŠ¤ë§ˆíŠ¸í°, í‚¤ì˜¤ìŠ¤í¬, ë°¥ì†¥ ë“±<br/>ë‹¤ì–‘í•œ ê¸°ê¸° ì‚¬ìš©ë²•ì„ ì•ˆë‚´í•©ë‹ˆë‹¤.</div>
            </div>
            <span class="home-btn-icon">ğŸ“˜</span>
          </button>
          <button class="home-btn secondary" onclick="startFindFlow()">
            <div>
              <div class="home-btn-main">í•„ìš”í•œ ì „ìê¸°ê¸° ì°¾ê¸°</div>
              <div class="home-btn-sub">"ì§‘ì´ ë„ˆë¬´ ê±´ì¡°í•´ìš”" ì²˜ëŸ¼ ê³ ë¯¼ì„ ë§í•˜ë©´<br/>ì–´ìš¸ë¦¬ëŠ” ê¸°ê¸°ë¥¼ ì¶”ì²œí•´ ë“œë¦½ë‹ˆë‹¤.</div>
            </div>
            <span class="home-btn-icon">ğŸ§­</span>
          </button>
        </div>

        <div class="info-section">
          <div class="info-row">
            <div class="info-card" onclick="startFaqFlow()">
              <div class="info-card-header">
                <div class="info-card-title">ìì£¼ ë¬»ëŠ” ì§ˆë¬¸</div>
                <div>â“</div>
              </div>
              <div class="info-card-text">ì™€ì´íŒŒì´, ê¸€ì í¬ê¸° ë“±<br/>ê¸°ë³¸ì ì¸ ì§ˆë¬¸ ëª¨ìŒ</div>
            </div>
            <div class="info-card" onclick="startPopularFlow()">
              <div class="info-card-header">
                <div class="info-card-title">ë§ì´ í™•ì¸í•œ ê¸°ëŠ¥</div>
                <div>â­</div>
              </div>
              <div class="info-card-text">ì™¸ë¶€ì…ë ¥, ì†Œë¦¬ í‚¤ìš°ê¸°<br/>ë“± ì¸ê¸° ê¸°ëŠ¥</div>
            </div>
          </div>
          <div class="info-card info-card-wide" style="border-color: rgba(239,68,68,0.5);" onclick="startEmergencyCall()">
            <div class="info-card-header">
              <div class="info-card-title" style="color:#f87171;">ê¸´ê¸‰ ë„ì›€ ìš”ì²­ (ì†ì£¼ì™€ ì—°ê²°)</div>
              <div>ğŸš¨</div>
            </div>
            <div class="info-card-text">ì ‘ì† ì¤‘ì¸ ì†ì ì—­í• ê³¼ ë°”ë¡œ ì—°ê²°ë©ë‹ˆë‹¤.</div>
          </div>
        </div>

        <div class="voice-area">
          <button class="voice-btn" onclick="startGlobalVoice()">ğŸ¤</button>
          <div class="voice-label">ë§ë¡œ ê¸°ëŠ¥ì„ ì°¾ì•„ë³´ì„¸ìš”</div>
        </div>
      </div>
    </div>

    <div id="screen-usage-category" class="screen">
      <div class="header-nav"><button class="back-btn" onclick="goToScreen('screen-home')">â†</button><span class="page-title">ì–´ë–¤ ê¸°ê¸°ì¸ê°€ìš”?</span></div><div class="list-container" id="list-category"></div>
    </div>
    <div id="screen-usage-brand" class="screen">
      <div class="header-nav"><button class="back-btn" onclick="goToScreen('screen-usage-category')">â†</button><span class="page-title">ê¸°ëŠ¥ ë¶„ë¥˜ ì„ íƒ</span></div><div class="list-container" id="list-brand"></div>
    </div>
    <div id="screen-usage-model" class="screen">
      <div class="header-nav"><button class="back-btn" onclick="goToScreen('screen-usage-brand')">â†</button><span class="page-title">ì„¸ë¶€ ê¸°ëŠ¥ ì„ íƒ</span></div><div class="list-container" id="list-model"></div>
    </div>
    <div id="screen-usage-guide" class="screen">
      <div class="header-nav"><button class="back-btn" onclick="goToScreen('screen-usage-model')">â†</button><span class="page-title">ì‚¬ìš© ë°©ë²• ì•ˆë‚´</span></div><div class="list-container" id="guide-content" style="padding-bottom:20px;"></div><button class="home-btn secondary" style="flex:0; margin-top:10px; padding:15px; justify-content:center;" onclick="goToScreen('screen-home')"><span style="font-weight:bold;">ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸°</span></button>
    </div>

    <div id="screen-find" class="screen">
      <div class="header-nav"><button class="back-btn" onclick="goToScreen('screen-home')">â†</button><span class="page-title">ê¸°ê¸° ì¶”ì²œ ë°›ê¸°</span></div><div class="chat-area" id="chat-box"></div><div class="chat-input-area"><button class="mic-btn idle" id="mic-btn" onclick="toggleMic()">ğŸ¤</button><input type="text" class="chat-input" id="chat-input" placeholder="ì§ì ‘ ì…ë ¥í•˜ê±°ë‚˜ ë§í•˜ê¸°..." /><button class="send-btn" onclick="sendMessage()">ì „ì†¡</button></div>
    </div>

    <div id="screen-faq" class="screen"><div class="header-nav"><button class="back-btn" onclick="goToScreen('screen-home')">â†</button><span class="page-title">ìì£¼ ë¬»ëŠ” ì§ˆë¬¸</span></div><div class="list-container" id="list-faq"></div></div>
    <div id="screen-popular" class="screen"><div class="header-nav"><button class="back-btn" onclick="goToScreen('screen-home')">â†</button><span class="page-title">ë§ì´ í™•ì¸í•œ ê¸°ëŠ¥</span></div><div class="list-container" id="list-popular"></div></div>

    <div id="screen-emergency" class="screen">
      <div class="call-ui">
        <div class="camera-feed" id="camera-feed">[ ê¹€ì†ì£¼ ì–¼êµ´ ]<br/>ì—°ê²°ë˜ì—ˆìŠµë‹ˆë‹¤.</div>
        <div class="call-avatar" id="video-avatar">ğŸ§‘â€ğŸ’»</div>
        <div class="call-status" id="call-status">ì†ì£¼ë‹˜ ì°¾ëŠ” ì¤‘...</div>
        <div class="call-timer" id="call-timer">00:00</div>
        <button class="hangup-btn" onclick="endCallAndFeedback()">ğŸ“</button>
      </div>
    </div>
    
    <div id="screen-feedback" class="screen center-layout">
      <div class="feedback-ui">
        <div class="feedback-input-ui" id="fb-input-ui">
          <div style="font-size:20px; font-weight:700; margin-bottom:10px;">ë¬¸ì œëŠ” í•´ê²°ë˜ì…¨ë‚˜ìš”?</div>
          <div style="color:#cbd5f5; font-size:15px; line-height:1.4; margin-bottom:20px;">
            ë°©ê¸ˆ ë„ì™€ë“œë¦° ì†ì£¼ë‹˜ì´<br/>ì–¼ë§Œí¼ ì¹œì ˆí–ˆëŠ”ì§€ í‰ê°€í•´ì£¼ì„¸ìš”.
          </div>
          <div class="stars-container" style="margin-bottom:30px;">
            <span class="star filled" onclick="rateStar(1)">â˜…</span>
            <span class="star filled" onclick="rateStar(2)">â˜…</span>
            <span class="star filled" onclick="rateStar(3)">â˜…</span>
            <span class="star filled" onclick="rateStar(4)">â˜…</span>
            <span class="star filled" onclick="rateStar(5)">â˜…</span>
          </div>
          <button class="feedback-btn" onclick="finishFeedback()">í‰ê°€ ì™„ë£Œ</button>
        </div>
        
        <div class="thankyou-msg" id="fb-thankyou-msg">
          ì´ìš©í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤!
        </div>
      </div>
    </div>

    <div id="screen-grandchild-home" class="screen">
      <div class="header-nav">
        <button class="back-btn" onclick="goToScreen('screen-role')">â—€</button>
        <span class="page-title">ì†ì£¼ ëª¨ë“œ</span>
      </div>
      <div class="gc-dashboard">
        
        <div id="gc-match-area" style="text-align:center; padding: 20px 0;">
          
          <div id="gc-match-start">
            <div style="font-size:40px; margin-bottom:10px;">ğŸ¤</div>
            <div style="font-size:16px; font-weight:bold; margin-bottom:6px;">ë§¤ì¹­ ì‹œì‘í•˜ê¸°</div>
            <div style="font-size:13px; color:#9ca3af; margin-bottom:16px;">
              ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ë„ì›€ì´ í•„ìš”í•œ<br/>ì–´ë¥´ì‹ ê³¼ ì—°ê²°ì„ ê¸°ë‹¤ë¦½ë‹ˆë‹¤.
            </div>
            <button class="home-btn" style="background:#2563eb; justify-content:center; text-align:center; padding:12px;" onclick="toggleMatching(true)">
              <span style="font-weight:bold;">ë§¤ì¹­ ì‹œì‘ (ON)</span>
            </button>
          </div>

          <div id="gc-match-radar" style="display:none;">
            <div class="radar-scanner">
              <div style="font-size:40px;">ğŸ“¡</div>
            </div>
            <div class="radar-status">ë§¤ì¹­ ëŒ€ê¸° ì¤‘...</div>
            <div style="font-size:13px; color:#cbd5f5; margin-top:6px;">
              ë„ì›€ì´ í•„ìš”í•œ ì–´ë¥´ì‹ ì´ ìƒê¸°ë©´<br/>ìë™ìœ¼ë¡œ ì—°ê²°ë©ë‹ˆë‹¤.
            </div>
            <button class="home-btn" style="background:#ef4444; margin-top:16px; padding:10px; min-height:40px; justify-content:center;" onclick="toggleMatching(false)">
              <span style="font-size:14px; font-weight:bold;">ë§¤ì¹­ ì¢…ë£Œ (OFF)</span>
            </button>
          </div>

        </div>

        <div class="gc-card">
          <div class="gc-card-title">
            <span>ë‚´ í™œë™ ë° ì´ë²¤íŠ¸</span>
            <span style="font-size:12px; background:#2563eb; padding:2px 8px; border-radius:99px;">Lv. 3</span>
          </div>
          <div style="display:flex; justify-content:space-between; margin-top:4px;">
            <div style="text-align:center;">
              <div style="font-size:12px; color:#9ca3af;">ì´ë²ˆ ë‹¬ í™œë™</div>
              <div style="font-size:18px; font-weight:700; color:#fff;">5íšŒ</div>
            </div>
            <div style="text-align:center;">
              <div style="font-size:12px; color:#9ca3af;">ë‚´ í‰ì </div>
              <div style="font-size:18px; font-weight:700; color:#fbbf24;">4.9</div>
            </div>
            <div style="text-align:center;">
              <div style="font-size:12px; color:#9ca3af;">í•´ê²°ìœ¨</div>
              <div style="font-size:18px; font-weight:700; color:#22c55e;">98%</div>
            </div>
          </div>
          <div class="event-progress-bg">
            <div class="event-progress-bar"></div>
          </div>
          <div class="event-text">
            <span>â˜• ìŠ¤íƒ€ë²…ìŠ¤ ì¿ í°ê¹Œì§€</span>
            <span>3íšŒ ë‚¨ìŒ!</span>
          </div>
        </div>

        <div class="gc-card">
          <div class="gc-card-title">ë‚´ê°€ ë„ì™€ë“œë¦° ë‚´ì—­</div>
          <div id="gc-log-list">
            <div class="log-item">
              <div class="log-header"><span>2024.11.20</span><span>ì™„ë£Œ</span></div>
              <div class="log-content">ë°•OO ì–´ë¥´ì‹ ì˜ 'í‚¤ì˜¤ìŠ¤í¬ ì£¼ë¬¸' ë¬¸ì˜ë¥¼ í•´ê²°í•´ ë“œë ¸ìŠµë‹ˆë‹¤.</div>
            </div>
            <div class="log-item">
              <div class="log-header"><span>2024.11.18</span><span>ì™„ë£Œ</span></div>
              <div class="log-content">ê¹€OO ì–´ë¥´ì‹ ê³¼ 15ë¶„ê°„ ë§ë²— ë´‰ì‚¬ë¥¼ ì§„í–‰í–ˆìŠµë‹ˆë‹¤.</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="screen-voice-nav" class="screen">
      <div class="header-nav"><button class="back-btn" onclick="goToScreen('screen-home')">âœ•</button><span class="page-title">ê²€ìƒ‰ ë° ê¸°ëŠ¥ ì°¾ê¸°</span></div>
      <div class="voice-nav-ui">
        <div class="voice-nav-icon" id="voice-nav-icon">ğŸ¤</div>
        <div><div class="voice-nav-text" id="voice-status-text">ë“£ê³  ìˆìŠµë‹ˆë‹¤...</div><div class="voice-nav-sub" id="voice-sub-text">"ì¹´ì¹´ì˜¤í†¡", "ë°¥ì†¥" ì²˜ëŸ¼<br/>ê¶ê¸ˆí•œ ê¸°ê¸° ì´ë¦„ì„ ë§í•´ë³´ì„¸ìš”.</div></div>
        <div class="chat-input-area" style="width:100%; margin-top:20px;"><input type="text" class="chat-input" id="voice-search-input" placeholder="ì§ì ‘ ì…ë ¥í•˜ì„¸ìš”..." /><button class="send-btn" onclick="handleGlobalSearch()">ğŸ”</button></div>
      </div>
    </div>

  </div>

  <script>
    // --- [ë°ì´í„° ì •ì˜] ---
    const applianceData = {
      "smartphone": { 
        name: "ìŠ¤ë§ˆíŠ¸í° ê¸°ì´ˆ", icon: "ğŸ“±", brands: ["ê¸°ë³¸ ì„¤ì •", "ì¹´ì¹´ì˜¤í†¡", "ìœ íŠœë¸Œ"], models: ["ê¸€ì í¬ê¸° ì¡°ì ˆ", "ë²¨ì†Œë¦¬ ë³€ê²½", "ì‚¬ì§„ ì „ì†¡", "ì˜ìƒ ë³´ê¸°"],
        guide: [{text:"ì„¤ì •(í†±ë‹ˆë°”í€´) ì•„ì´ì½˜ì„ ì°¾ì•„ ëˆ„ë¥´ì„¸ìš”.", img:"âš™ï¸"}, {text:"'ë””ìŠ¤í”Œë ˆì´' ë˜ëŠ” 'í™”ë©´' ë©”ë‰´ë¥¼ ëˆ„ë¥´ì„¸ìš”.", img:"ğŸ”†"}, {text:"'ê¸€ì í¬ê¸°ì™€ ìŠ¤íƒ€ì¼'ì„ ëˆŒëŸ¬ ì¡°ì ˆí•˜ì„¸ìš”.", img:"ğŸ” "}]
      },
      "kiosk": { name: "í‚¤ì˜¤ìŠ¤í¬ (ë¬´ì¸ì£¼ë¬¸)", icon: "ğŸ”", brands: ["ì¹´í˜", "í–„ë²„ê±° ê°€ê²Œ", "ì‹ë‹¹"], models: ["ë§¤ì¥ì—ì„œ ë¨¹ê¸°", "í¬ì¥í•˜ê¸°"], guide: [{text:"í™”ë©´ì„ í•œ ë²ˆ í„°ì¹˜í•˜ì„¸ìš”.", img:"ğŸ‘†"}, {text:"'ë§¤ì¥ì—ì„œ ì‹ì‚¬' ë˜ëŠ” 'í¬ì¥í•˜ê¸°'ë¥¼ ê³ ë¥´ì„¸ìš”.", img:"ğŸ¥¡"}] },
      "ricecooker": { name: "ì „ê¸° ë°¥ì†¥", icon: "ğŸš", brands: ["ì¿ ì¿ ", "ì¿ ì²¸"], models: ["ë°±ë¯¸ ì·¨ì‚¬", "ì¡ê³¡ ì·¨ì‚¬"], guide: [{text:"ìŒ€ì„ ì”»ì–´ ë‚´ì†¥ì— ë„£ê³  ëšœê»‘ì„ ì ê·¸ì„¸ìš”.", img:"ğŸ”’"}, {text:"'ì·¨ì‚¬' ë²„íŠ¼ì„ ê¾¹ ëˆ„ë¥´ì„¸ìš”.", img:"ğŸ”¥"}] },
      "airfryer": { name: "ì—ì–´í”„ë¼ì´ì–´", icon: "ğŸ¤", brands: ["í•„ë¦½ìŠ¤", "ë…¸ë¸Œëœë“œ"], models: ["ê°ìíŠ€ê¹€", "ì¹˜í‚¨ ë°ìš°ê¸°"], guide: [{text:"ìŒì‹ì„ ê²¹ì¹˜ì§€ ì•Šê²Œ ë„£ìœ¼ì„¸ìš”.", img:"ğŸ§º"}, {text:"ì˜¨ë„ 180ë„, ì‹œê°„ 10ë¶„ì— ë§ì¶”ì„¸ìš”.", img:"â°"}] },
      "microwave": { name: "ì „ìë ˆì¸ì§€", icon: "ğŸ±", brands: ["ì‚¼ì„±ì „ì", "LGì „ì"], models: ["ë²„íŠ¼ì‹", "ë‹¤ì´ì–¼ì‹"], guide: [{text:"ìŒì‹ì„ ë„£ìœ¼ì„¸ìš”.", img:"ğŸšª"}, {text:"ì‹œì‘ ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”.", img:"â–¶ï¸"}] },
      "washing": { name: "ì„¸íƒê¸°", icon: "ğŸ‘•", brands: ["ì‚¼ì„±ì „ì", "LGì „ì"], models: ["í‘œì¤€ ì„¸íƒ", "ì´ë¶ˆ ë¹¨ë˜"], guide: [{text:"ë¹¨ë˜ì™€ ì„¸ì œë¥¼ ë„£ìœ¼ì„¸ìš”.", img:"ğŸ§º"}, {text:"ë™ì‘ ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”.", img:"â–¶ï¸"}] },
      "tv": { name: "TV", icon: "ğŸ“º", brands: ["ì‚¼ì„±ì „ì", "LGì „ì"], models: ["ì „ì› ì¼œê¸°", "ì™¸ë¶€ì…ë ¥"], guide: [{text:"ë¹¨ê°„ ì „ì› ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”.", img:"ğŸ”´"}, {text:"ì™¸ë¶€ì…ë ¥ ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”.", img:"ğŸ“º"}] },
      "ac": { name: "ì—ì–´ì»¨", icon: "â„ï¸", brands: ["ì‚¼ì„±ì „ì", "LGì „ì"], models: ["ìŠ¤íƒ ë“œí˜•"], guide: [{text:"ì „ì›ì„ ëˆ„ë¥´ì„¸ìš”.", img:"ğŸ“±"}, {text:"ì˜¨ë„ë¥¼ ë‚®ì¶”ì„¸ìš”.", img:"ğŸŒ¡ï¸"}] }
    };
    const faqData = [{ q: "ê¸€ì í¬ê¸°ê°€ ì‘ì•„ìš”", a: "ìŠ¤ë§ˆíŠ¸í° ê¸°ì´ˆ > ê¸°ë³¸ ì„¤ì • í™•ì¸í•˜ì„¸ìš”." }, { q: "ì™€ì´íŒŒì´ ì•ˆ ë¼ìš”", a: "ìƒë‹¨ë°”ì˜ íŒŒë€ìƒ‰ ì•„ì´ì½˜ì„ í™•ì¸í•˜ì„¸ìš”." }];
    const popularData = [{ title: "TV ì™¸ë¶€ì…ë ¥ ë°”ê¾¸ê¸°", desc: "í™”ë©´ì´ ì•ˆ ë‚˜ì˜¬ ë•Œ" }, { title: "ì¹´ì¹´ì˜¤í†¡ ì‚¬ì§„ ë³´ë‚´ê¸°", desc: "ì†ì£¼ì—ê²Œ ì‚¬ì§„ ì „ì†¡" }];
    let currentCategory, currentBrand, currentModel, isRecording = false, callTimerIntv;
    let currentRating = 5; // í˜„ì¬ ë³„ì  (ê¸°ë³¸ 5ì )

    // --- [ê³µí†µ] ---
    function goToScreen(screenId) {
      document.querySelectorAll('.screen').forEach(el => el.classList.remove('active'));
      const target = document.getElementById(screenId);
      if (target) target.classList.add('active');
    }
    window.addEventListener('load', () => {
      setTimeout(() => goToScreen('screen-role'), 2500);
      new MutationObserver((m) => { m.forEach((x) => { if(x.target.id==='screen-loading2' && x.target.classList.contains('active')) setTimeout(()=>goToScreen('screen-home'),2000); })}).observe(document.getElementById('screen-loading2'), {attributes:true});
    });

    // --- [ì‚¬ìš©ë²•] ---
    function startUsageFlow() { const l=document.getElementById('list-category'); l.innerHTML=''; Object.keys(applianceData).forEach(k=>{ const i=applianceData[k]; l.innerHTML+=`<div class="list-item" onclick="currentCategory='${k}';showBrandList()"><span class="list-text">${i.name}</span><span style="font-size:24px;">${i.icon}</span></div>`; }); goToScreen('screen-usage-category'); }
    function showBrandList() { const l=document.getElementById('list-brand'); l.innerHTML=''; applianceData[currentCategory].brands.forEach(b=>{ l.innerHTML+=`<div class="list-item" onclick="currentBrand='${b}';showModelList()"><span class="list-text">${b}</span><span style="font-size:24px;">ğŸ“</span></div>`; }); goToScreen('screen-usage-brand'); }
    function showModelList() { const l=document.getElementById('list-model'); l.innerHTML=''; applianceData[currentCategory].models.forEach(m=>{ l.innerHTML+=`<div class="list-item" onclick="currentModel='${m}';showGuide()"><span class="list-text">${m}</span><span style="font-size:24px;">âš™ï¸</span></div>`; }); goToScreen('screen-usage-model'); }
    function showGuide() { const c=document.getElementById('guide-content'); c.innerHTML=`<div style="margin-bottom:10px; color:#38bdf8;">${applianceData[currentCategory].name} > ${currentModel}</div>`; applianceData[currentCategory].guide.forEach((s,i)=>{ c.innerHTML+=`<div class="guide-step"><div class="step-num">STEP ${i+1}</div><div class="step-content">${s.text}</div><div class="step-img-box">${s.img}</div></div>`; }); goToScreen('screen-usage-guide'); }

    // --- [ê¸°ê¸° ì°¾ê¸°] ---
    function startFindFlow() { document.getElementById('chat-box').innerHTML=`<div class="message msg-ai">ì–´ë–¤ ì ì´ ë¶ˆí¸í•˜ì‹ ê°€ìš”?</div>`; document.getElementById('chat-input').value=""; goToScreen('screen-find'); }
    function toggleMic() { const b=document.getElementById('mic-btn'), i=document.getElementById('chat-input'); if(!isRecording){ isRecording=true; b.classList.remove('idle'); b.innerHTML="â¹"; i.placeholder="ë“£ëŠ” ì¤‘..."; setTimeout(()=>{ if(isRecording){ i.value="ì²­ì†Œê°€ í˜ë“¤ì–´"; toggleMic(); sendMessage(); } },2500); } else { isRecording=false; b.classList.add('idle'); b.innerHTML="ğŸ¤"; i.placeholder="ì…ë ¥ ë˜ëŠ” ë§í•˜ê¸°..."; } }
    function sendMessage() { const i=document.getElementById('chat-input'), t=i.value.trim(), c=document.getElementById('chat-box'); if(!t)return; c.innerHTML+=`<div class="message msg-user">${t}</div>`; i.value=""; c.scrollTop=c.scrollHeight; setTimeout(()=>{ let r="ì´í•´í•˜ì§€ ëª»í–ˆì–´ìš”.", rec=null; if(t.includes("ì²­ì†Œ")){r="ë¡œë´‡ ì²­ì†Œê¸°ë¥¼ ì¶”ì²œí•´ìš”."; rec={t:"íš¨ë„ ë¡œë´‡ ì²­ì†Œê¸°",d:"ë¬¼ê±¸ë ˆ ê²¸ìš©"};} else if(t.includes("ê±´ì¡°")){r="ê°€ìŠµê¸°ë¥¼ ì¶”ì²œí•´ìš”."; rec={t:"ëŒ€ìš©ëŸ‰ ê°€ìŠµê¸°",d:"ì„¸ì²™ ê°„í¸"};} c.innerHTML+=`<div class="message msg-ai">${r}</div>`; if(rec)c.innerHTML+=`<div class="result-card"><div class="result-title">ì¶”ì²œ: ${rec.t}</div><div class="result-desc">${rec.d}</div><button class="buy-btn">íŒë§¤ì  ë³´ê¸°</button></div>`; c.scrollTop=c.scrollHeight; },800); }

    // --- [ìŒì„±/ê²€ìƒ‰] ---
    function startGlobalVoice() { goToScreen('screen-voice-nav'); document.getElementById('voice-status-text').innerText="ë“£ê³  ìˆìŠµë‹ˆë‹¤..."; document.getElementById('voice-search-input').value=""; setTimeout(()=>{ document.getElementById('voice-status-text').innerText="ë§ì”€í•´ì£¼ì„¸ìš”."; document.getElementById('voice-search-input').placeholder="ë“£ê¸° ëŒ€ê¸° ì¤‘..."; },2500); }
    function handleGlobalSearch() { const inp=document.getElementById('voice-search-input').value.trim(); if(!inp)return; let fk=null; Object.keys(applianceData).forEach(k=>{ const d=applianceData[k]; if(d.name.includes(inp)||d.brands.some(b=>b.includes(inp))||d.models.some(m=>m.includes(inp))||(inp.includes("ì¹´í†¡")&&k==="smartphone")||(inp.includes("ë°¥")&&k==="ricecooker")) fk=k; }); if(fk){ alert(`'${inp}' ê´€ë ¨ ë©”ë‰´ë¡œ ì´ë™í•©ë‹ˆë‹¤.`); currentCategory=fk; showBrandList(); } else { alert("ê²°ê³¼ë¥¼ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤."); } }

    // --- [ì„œë¸Œ] ---
    function startFaqFlow() { const l=document.getElementById('list-faq'); l.innerHTML=''; faqData.forEach(i=>{ l.innerHTML+=`<div class="list-item"><div style="display:flex; flex-direction:column; gap:6px;"><span class="list-text" style="font-size:16px;">Q. ${i.q}</span><span style="font-size:14px; color:#9ca3af;">A. ${i.a}</span></div></div>`; }); goToScreen('screen-faq'); }
    function startPopularFlow() { const l=document.getElementById('list-popular'); l.innerHTML=''; popularData.forEach(i=>{ l.innerHTML+=`<div class="list-item"><div style="display:flex; flex-direction:column; gap:6px;"><span class="list-text" style="font-size:16px;">${i.title}</span><span style="font-size:14px; color:#9ca3af;">${i.desc}</span></div></div>`; }); goToScreen('screen-popular'); }

    // --- [ê¸´ê¸‰ ë„ì›€ (Azar ë§¤ì¹­)] ---
    function startEmergencyCall() { 
      goToScreen('screen-emergency'); 
      document.getElementById('call-status').innerText="ë´‰ì‚¬ì ì°¾ëŠ” ì¤‘..."; 
      document.getElementById('call-timer').innerText="00:00"; 
      document.getElementById('camera-feed').classList.remove('connected'); 
      document.getElementById('video-avatar').style.display="flex"; 
      setTimeout(()=>{ 
        document.getElementById('call-status').innerText="ê¹€ì†ì£¼ í•™ìƒ (ì—°ê²°ë¨)"; 
        document.getElementById('camera-feed').classList.add('connected'); 
        document.getElementById('video-avatar').style.display="none"; 
        let s=0; clearInterval(callTimerIntv); 
        callTimerIntv=setInterval(()=>{ s++; let m=Math.floor(s/60), sec=s%60; document.getElementById('call-timer').innerText=`${m<10?'0'+m:m}:${sec<10?'0'+sec:sec}`; },1000); 
      },2000); 
    }
    function endCallAndFeedback() { clearInterval(callTimerIntv); goToScreen('screen-feedback'); resetFeedbackUI(); }

    // --- [NEW: ë³„ì  í‰ê°€ ë¡œì§] ---
    function rateStar(score) {
      currentRating = score;
      const stars = document.querySelectorAll('.feedback-ui .star');
      stars.forEach((star, index) => {
        if (index < score) {
          star.classList.add('filled'); star.innerText = 'â˜…';
        } else {
          star.classList.remove('filled'); star.innerText = 'â˜†';
        }
      });
    }

    function finishFeedback() {
      const inputUI = document.getElementById('fb-input-ui');
      const msgUI = document.getElementById('fb-thankyou-msg');
      
      // 1. ì…ë ¥ UI ìˆ¨ê¸°ê³ , ê°ì‚¬ ë©”ì‹œì§€ í‘œì‹œ
      inputUI.style.opacity = '0';
      msgUI.style.opacity = '1';

      // 2. 2ì´ˆ í›„ ê°ì‚¬ ë©”ì‹œì§€ ìˆ¨ê¸°ê³  í™ˆìœ¼ë¡œ ì´ë™
      setTimeout(() => {
        msgUI.style.opacity = '0';
        setTimeout(() => {
          goToScreen('screen-home');
          resetFeedbackUI(); // ë‹¤ìŒ ì‚¬ìš©ì„ ìœ„í•´ ì´ˆê¸°í™”
        }, 500); // CSS transition ì‹œê°„ê³¼ ë§ì¶¤
      }, 2000);
    }

    // í”¼ë“œë°± UI ì´ˆê¸°í™” í•¨ìˆ˜
    function resetFeedbackUI() {
      document.getElementById('fb-input-ui').style.opacity = '1';
      document.getElementById('fb-thankyou-msg').style.opacity = '0';
      rateStar(5); // ë³„ì  5ì ìœ¼ë¡œ ì´ˆê¸°í™”
    }

    // --- [ì†ì£¼ ëª¨ë“œ: ìˆ˜ë™ ë§¤ì¹­ í† ê¸€] ---
    function toggleMatching(isOn) {
      const startDiv = document.getElementById('gc-match-start');
      const radarDiv = document.getElementById('gc-match-radar');
      if (isOn) { startDiv.style.display = 'none'; radarDiv.style.display = 'block'; } 
      else { startDiv.style.display = 'block'; radarDiv.style.display = 'none'; }
    }
  </script>
</body>
</html>
